{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Sheratan Value Schema v1",
  "type": "object",
  "required": ["meta", "semantics", "provenance", "generation", "time"],
  "properties": {
    "meta": {
      "type": "object",
      "required": ["id", "label", "namespace"],
      "properties": {
        "id": { "type": "string" },
        "label": { "type": "string" },
        "version": { "type": "string", "default": "1.0" },
        "namespace": { "type": "string" }
      }
    },
    "semantics": {
      "type": "object",
      "required": ["dimension", "unit"],
      "properties": {
        "dimension": { "type": "string" },
        "unit": { "type": "string" },
        "scale": {
          "type": "object",
          "properties": {
            "type": { "enum": ["ratio", "interval", "ordinal", "nominal"] },
            "min": { "type": "number" },
            "max": { "type": "number" }
          }
        },
        "interpretation": {
          "type": "object",
          "properties": {
            "higher_is": { "enum": ["better", "worse", "neutral"] }
          }
        }
      }
    },
    "provenance": {
      "type": "object",
      "required": ["source_type"],
      "properties": {
        "source_type": { "enum": ["telemetry", "log", "human", "model", "synthetic"] },
        "source_id": { "type": "string" },
        "acquisition": {
          "type": "object",
          "properties": {
            "method": { "type": "string" },
            "endpoint": { "type": "string" }
          }
        }
      }
    },
    "generation": {
      "type": "object",
      "required": ["transform"],
      "properties": {
        "raw_input": { "type": "string" },
        "transform": {
          "type": "object",
          "required": ["type"],
          "properties": {
            "type": { "type": "string" },
            "function": { "type": "string" },
            "window": { "type": "string" }
          }
        }
      }
    },
    "modulation": {
      "type": "object",
      "properties": {
        "normalization": { "type": "object" },
        "smoothing": { "type": "object" },
        "weighting": { "type": "number" }
      }
    },
    "time": {
      "type": "object",
      "required": ["sampling_rate"],
      "properties": {
        "sampling_rate": { "type": "string" },
        "validity_duration": { "type": "string" },
        "latency_model": {
          "type": "object",
          "properties": {
            "type": { "enum": ["instant", "delayed", "windowed"] },
            "expected_delay": { "type": "string" }
          }
        }
      }
    },
    "quality": {
      "type": "object",
      "properties": {
        "confidence": { "type": "number", "minimum": 0, "maximum": 1 },
        "noise_level": { "enum": ["low", "medium", "high"] },
        "last_validated": { "type": "string", "format": "date-time" }
      }
    }
  }
}
